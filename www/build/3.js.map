{"version":3,"sources":["../../src/pages/documento-venda/documento-venda.module.ts","../../src/pages/documento-venda/documento-venda.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DocumentoVendaPage } from './documento-venda';\n\n@NgModule({\n  declarations: [\n    DocumentoVendaPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DocumentoVendaPage),\n  ],\n})\nexport class DocumentoVendaPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/documento-venda/documento-venda.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { DocumentoVendaProvider } from '../../providers/documento-venda/documento-venda';\nimport { FormBuilder, FormGroup, FormControl, Validators } from '@angular/forms';\nimport { DocumentoValidator } from '../../validators/documento';\nimport { IDocumentoVenda, IDocumentoVendaFields, ILinha } from '../../interfaces/interfaces';\nimport { ClientesValidator } from '../../validators/clientes';\nimport { ArtigosValidator } from '../../validators/artigos';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\nimport { MessagesValidator } from '../../validators/messages';\nimport { Controllers } from '../../controllers/controllers';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-documento-venda',\n  templateUrl: 'documento-venda.html',\n})\nexport class DocumentoVendaPage {\n  docForm: FormGroup\n  documentoObj = {} as IDocumentoVenda;\n  docFields = {} as IDocumentoVendaFields;\n  series: any[];\n  linhas: any[];\n  validationMessages = this.messagesValidator.documentoVendas();\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public docValidator: DocumentoValidator,\n              private formBuilder: FormBuilder,\n              private docProvider: DocumentoVendaProvider,\n              private clienteValidator: ClientesValidator,\n              private artigosValidator: ArtigosValidator,\n              private authProvider: AuthServiceProvider,\n              private messagesValidator: MessagesValidator,\n              private controllers: Controllers) {\n\n    this.docForm = this.formBuilder.group({\n      documento: new FormControl('', Validators.compose([Validators.required, Validators.pattern('[a-zA-Z]*')]), docValidator.checkDocumento.bind(docValidator)),\n      serie: new FormControl('', Validators.compose([Validators.required])),\n      dataDoc: new FormControl(''),\n      dataVenc: new FormControl(''),\n      cliente: new FormControl('', Validators.compose([Validators.required]), docValidator.checkCliente.bind(docValidator)),\n      artigo: new FormControl('', Validators.compose([Validators.required]), docValidator.checkArtigo.bind(docValidator)),\n      quantidade: new FormControl('', Validators.compose([Validators.required]), docValidator.quantidadeValidator.bind(docValidator)),\n    })\n    this.documentoObj.Linhas = new Array<ILinha>();\n  }\n\n  ionViewCanEnter(): boolean | Promise<any> {\n    return this.authProvider.isAuthenticated(this.navCtrl);\n  }\n\n  getSerie() {\n    this.docProvider.getSeries(this.documentoObj.Tipodoc).subscribe(data => {\n      this.series = data\n    })\n  }\n\n  daValorDocumento() {\n    let atributo = \"Descricao\"\n    this.docProvider.daValorDocumento(this.documentoObj.Tipodoc, atributo).subscribe(data => {\n      this.docFields.DescricaoDoc = data\n    })\n  }\n\n  daValorCliente() {\n    let atributos = [\n      \"Nome\",\n      \"NumContribuinte\"\n    ]\n    this.clienteValidator.daValorCliente(this.documentoObj.Entidade, atributos).then((data) => {\n      this.docFields.NomeCliente = data[0].Valor;\n      this.docFields.NumContribuinte = data[1].Valor\n    })\n  }\n\n  daValorArtigo() {\n    let atributos = [\n      \"Descricao\",\n      \"ArmazemSugestao\"\n    ]\n    this.artigosValidator.daValorArtigo(this.docFields.Artigo, atributos).then((data) => {\n      this.docFields.DescricaoArtigo = data[0].Valor;\n      this.docFields.ArmazemArtigo = data[1].Valor;\n    })\n  }\n\n  addArtigo() {\n    this.documentoObj.Linhas.push({\n      Artigo: this.docFields.Artigo,\n      Quantidade: this.docFields.Quantidade\n    })\n    this.linhas = this.documentoObj.Linhas;\n  }\n\n  removeArtigo(artigo) {\n    this.documentoObj.Linhas.forEach((item, index) => {\n      if (item === artigo) this.documentoObj.Linhas.splice(index, 1)\n    })\n  }\n\n  createDocument() {\n    this.documentoObj.TipoEntidade = \"C\";\n    let msg = \"A criar documento..\"\n    let loader = this.controllers.loader(msg)\n    loader.present().then(() => {\n      this.docProvider.createDocument(this.documentoObj);\n    });\n    console.log(this.documentoObj)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/documento-venda/documento-venda.ts"],"sourceRoot":""}